<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Suarzaxmod Corporation</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <style>
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6610f2;
            --accent-color: #fd7e14;
            --background-color: #121212;
            --surface-color: #1e1e1e;
            --text-color: #ffffff;
            --muted-text: #b0b0b0;
            --card-bg-color: rgba(255, 255, 255, 0.05);
            --card-hover-color: rgba(255, 255, 255, 0.1);
            --transition-speed: 0.3s;
        }

        /* Light mode variables */
        .light-mode {
            --background-color: #f8f9fa;
            --surface-color: #ffffff;
            --text-color: #212529;
            --muted-text: #6c757d;
            --card-bg-color: rgba(0, 0, 0, 0.03);
            --card-hover-color: rgba(0, 0, 0, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color var(--transition-speed), color var(--transition-speed);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Background styles */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            z-index: -1;
            overflow: hidden;
        }

        .background-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        .background-image.active {
            opacity: 1;
        }

        .background-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(0,0,0,0.2) 0%, 
                rgba(0,0,0,0.6) 50%, 
                var(--background-color) 100%);
        }

        .bottom-background {
            position: fixed;
            top: 50%;
            left: 0;
            width: 100%;
            height: 50%;
            background-color: var(--background-color);
            z-index: -1;
        }

        /* Header styles */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: rgba(var(--background-color-rgb), 0.8);
            backdrop-filter: blur(10px);
            transition: all var(--transition-speed);
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .light-mode header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .logo {
            max-width: 50px;
            height: auto;
            filter: drop-shadow(0 0 5px var(--primary-color));
            transition: transform var(--transition-speed);
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .header-button {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.2rem;
            padding: 8px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed);
            position: relative;
        }

        .header-button:hover, .header-button:focus {
            color: var(--primary-color);
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .header-button:active {
            transform: scale(0.95);
        }

        .light-mode .header-button:hover, .light-mode .header-button:focus {
            background-color: rgba(0, 0, 0, 0.05);
        }

        /* More menu dropdown */
        .more-menu {
            position: relative;
            display: inline-block;
        }

        .more-menu-content {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: var(--surface-color);
            min-width: 180px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 8px 0;
            z-index: 1001;
            margin-top: 5px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: fadeIn 0.2s ease;
        }

        .light-mode .more-menu-content {
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .more-menu-content.show {
            display: block;
        }

        .more-menu-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            color: var(--text-color);
            text-decoration: none;
            transition: all var(--transition-speed);
            cursor: pointer;
        }

        .more-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--primary-color);
        }

        .light-mode .more-menu-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .more-menu-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Section titles */
        .section-title {
            position: relative;
            color: var(--text-color);
            font-weight: 600;
            margin: 2rem 0 1.5rem;
            display: inline-block;
            padding-bottom: 5px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 3px;
        }

        /* Social icons */
        .social-icons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 1.5rem 0;
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            transition: all var(--transition-speed);
            color: var(--text-color);
            text-decoration: none;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .social-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            opacity: 0;
            transition: opacity var(--transition-speed);
            z-index: -1;
        }

        .social-icon:hover::before {
            opacity: 1;
        }

        .social-icon:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(var(--primary-color-rgb), 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .social-icon img {
            width: 60%;
            height: 60%;
            object-fit: contain;
            transition: transform var(--transition-speed);
        }

        .social-icon:hover img {
            transform: scale(1.1);
        }

        /* Category cards */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin: 1.5rem 0;
        }

        .category-card {
            background-color: var(--card-bg-color);
            border-radius: 12px;
            overflow: hidden;
            transition: all var(--transition-speed);
            height: 100%;
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: var(--text-color);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .light-mode .category-card {
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            background-color: var(--card-hover-color);
        }

        .category-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            transition: transform var(--transition-speed);
        }

        .category-card:hover .category-image {
            transform: scale(1.05);
        }

        .category-title {
            padding: 12px;
            text-align: center;
            font-weight: 500;
            font-size: 0.9rem;
            background-color: rgba(0, 0, 0, 0.1);
            margin: 0;
            transition: all var(--transition-speed);
        }

        .category-card:hover .category-title {
            background-color: var(--primary-color);
            color: white;
        }

        /* Footer */
        footer {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px 0;
            text-align: center;
            margin-top: 3rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .light-mode footer {
            background-color: rgba(0, 0, 0, 0.02);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Swiper slider - Mejorado con efectos visuales */
        .swiper {
            width: 100%;
            height: 250px;
            margin: 1.5rem 0;
            border-radius: 12px;
            overflow: visible;
            padding: 20px 0;
        }

        .swiper-slide {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s ease;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform-style: preserve-3d;
            perspective: 1000px;
            opacity: 0.7;
            transform: scale(0.9);
            filter: blur(1px);
        }

        .swiper-slide-active {
            opacity: 1;
            transform: scale(1);
            filter: blur(0);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .swiper-slide-prev, .swiper-slide-next {
            opacity: 0.85;
            transform: scale(0.95);
            filter: blur(0.5px);
            z-index: 1;
        }

        


.swiper-slide {
    width: 100%;
    height: 250px;
    position: relative;
    overflow: hidden;
}

.swiper-slide img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}




        .swiper-slide:hover img {
            transform: scale(1.05);
        }

        .swiper-slide::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(0,0,0,0.1) 0%, 
                rgba(0,0,0,0.4) 100%);
            opacity: 0;
            transition: opacity var(--transition-speed);
        }

        .swiper-slide:hover::after {
            opacity: 1;
        }

        .swiper-slide-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
            color: white;
            transform: translateY(100%);
            transition: transform var(--transition-speed);
            z-index: 2;
        }

        .swiper-slide:hover .swiper-slide-content {
            transform: translateY(0);
        }

        .swiper-slide-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
        }

        .swiper-slide-description {
            font-size: 0.9rem;
            margin: 5px 0 0;
            opacity: 0.8;
        }

        .swiper-pagination-bullet {
            background-color: var(--primary-color);
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .swiper-pagination-bullet-active {
            opacity: 1;
            background-color: var(--primary-color);
            transform: scale(1.2);
        }

        .swiper-button-next, 
        .swiper-button-prev {
            color: var(--primary-color);
            background-color: rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0.8);
        }

        .swiper:hover .swiper-button-next,
        .swiper:hover .swiper-button-prev {
            opacity: 1;
            transform: scale(1);
        }

        .swiper-button-next:hover, 
        .swiper-button-prev:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .swiper-button-next:after, 
        .swiper-button-prev:after {
            font-size: 18px;
        }

        /* Radio Player - Mejorado según solicitud */
        .radio-player {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            color: white;
            z-index: 1000;
            transition: transform var(--transition-speed);
            transform: translateY(100%);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .radio-player.active {
            transform: translateY(0);
        }

        .radio-player-mini {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            gap: 15px;
        }

        .station-logo {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .station-info {
            flex: 1;
            min-width: 0;
        }

        .station-name {
            font-weight: 600;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 1.1rem;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .station-meta {
            font-size: 0.75rem;
            color: var(--muted-text);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-controls {
            display: flex;
            gap: 10px;
        }

        .control-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed);
        }

        .control-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }

        .control-button:active {
            transform: scale(0.95);
        }

        .play-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            box-shadow: 0 4px 10px rgba(var(--primary-color-rgb), 0.4);
        }

        .play-button:hover {
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            box-shadow: 0 6px 15px rgba(var(--primary-color-rgb), 0.5);
        }

        /* Fullscreen player - Cambiado a negro transparente difuminado */
        .radio-player-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            z-index: 2000;
            display: none;
            flex-direction: column;
            padding: 2rem;
            color: white;
            overflow-y: auto;
        }

        .fullscreen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .fullscreen-title {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fullscreen-title i {
            font-size: 1.8rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .close-fullscreen {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .close-fullscreen:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .fullscreen-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 2rem;
        }

        .fullscreen-station-logo {
            width: 200px;
            height: 200px;
            border-radius: 20px;
            object-fit: cover;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: pulse 2s infinite alternate;
            border: 4px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            100% {
                transform: scale(1.05);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            }
        }

        .fullscreen-station-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .fullscreen-station-meta {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
        }

        .fullscreen-controls {
            display: flex;
            gap: 20px;
            margin-top: 1rem;
        }

        .fullscreen-control {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            transition: all var(--transition-speed);
        }

        .fullscreen-control:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .fullscreen-play {
            background-color: white;
            color: var(--primary-color);
            width: 70px;
            height: 70px;
            font-size: 1.8rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .fullscreen-play:hover {
            background-color: white;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        }

        .rhythm-effect {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 80px;
            gap: 5px;
            margin: 2rem 0;
        }

        .bar {
            width: 8px;
            height: 10px;
            background: white;
            border-radius: 4px;
            transition: height 0.2s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        /* Lista de estaciones - Mejorada para ser más visible */
        .station-list-container {
            width: 100%;
            max-width: 600px;
            margin-top: 1rem;
        }

        .station-list-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .station-list {
            max-height: 300px;
            overflow-y: auto;
            width: 100%;
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }

        .station-list::-webkit-scrollbar {
            width: 6px;
        }

        .station-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .station-list::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .station-item {
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .station-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .station-item.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-left: 3px solid white;
        }

        .station-item-logo {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            object-fit: cover;
        }

        .station-item-info {
            flex: 1;
        }

        .station-item-name {
            font-weight: 500;
            margin: 0;
            font-size: 0.9rem;
        }

        .station-item-freq {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .connection-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 1rem;
        }

        .connection-status.good {
            background-color: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }

        .connection-status.medium {
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .connection-status.poor {
            background-color: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }

        /* Visualizador de audio mejorado */
        .audio-visualizer {
            width: 100%;
            height: 100px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .visualizer-container {
            width: 100%;
            max-width: 300px;
            height: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.2);
        }

        canvas.visualizer {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Profile Modal */
        .modal-custom {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content-custom {
            background-color: var(--surface-color);
            border-radius: 15px;
            width: 100%;
            max-width: 500px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header-custom {
            position: relative;
            height: 150px;
            background-size: cover;
            background-position: center;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            z-index: 10;
            transition: all var(--transition-speed);
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        .profile-picture-container {
            position: absolute;
            bottom: -50px;
            left: 20px;
            display: flex;
            align-items: flex-end;
            z-index: 5;
        }

        .profile-picture {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid var(--primary-color);
            background-size: cover;
            background-position: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .profile-actions {
            display: flex;
            margin-left: 10px;
            margin-bottom: 10px;
        }

        .profile-action-button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            transition: all var(--transition-speed);
        }

        .profile-action-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .modal-body-custom {
            padding: 60px 20px 20px;
        }

        .profile-form {
            display: grid;
            gap: 15px;
        }

        .form-control-custom {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            padding: 12px 15px;
            border-radius: 8px;
            transition: all var(--transition-speed);
        }

        .form-control-custom:focus {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.2);
            outline: none;
        }

        .light-mode .form-control-custom {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: var(--text-color);
        }

        .light-mode .form-control-custom:focus {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-btn {
            display: block;
            width: 100%;
            padding: 12px 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-color);
            text-align: left;
            transition: all var(--transition-speed);
        }

        .file-input-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .light-mode .file-input-btn {
            background-color: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .light-mode .file-input-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .btn-primary-custom {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: all var(--transition-speed);
            margin-top: 10px;
        }

        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(var(--primary-color-rgb), 0.3);
        }

        .btn-primary-custom:active {
            transform: translateY(0);
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--surface-color);
            color: var(--text-color);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(120%);
            transition: transform 0.3s ease;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin: 0;
            font-size: 1rem;
        }

        .notification-message {
            margin: 5px 0 0;
            font-size: 0.9rem;
            color: var(--muted-text);
        }

        /* Offline Modal */
        .offline-modal .modal-content-custom {
            text-align: center;
            padding: 30px;
        }

        .offline-icon {
            font-size: 3rem;
            color: #dc3545;
            margin-bottom: 20px;
            animation: pulse 1.5s infinite alternate;
        }

        .offline-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .offline-message {
            color: var(--muted-text);
            margin-bottom: 20px;
        }

        /* Responsive adjustments */
        @media (max-width: 576px) {
            .category-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .fullscreen-station-logo {
                width: 150px;
                height: 150px;
            }

            .fullscreen-station-name {
                font-size: 1.5rem;
            }

            .fullscreen-control {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .radio-player-fullscreen {
                padding: 1rem;
            }
        }

        @media (max-width: 768px) {
            .swiper {
                height: 200px;
            }
        }

        /* Animation keyframes */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Dark/Light mode RGB variables */
        :root {
            --primary-color-rgb: 13, 110, 253;
            --secondary-color-rgb: 102, 16, 242;
            --background-color-rgb: 18, 18, 18;
        }

        .light-mode {
            --background-color-rgb: 248, 249, 250;
        }
    </style>
</head>
<body oncontextmenu="return false">
    <!-- Background elements -->
    <div class="background-container" id="backgroundContainer">
        <div class="background-image" id="bg1"></div>
        <div class="background-image" id="bg2"></div>
        <div class="background-image" id="bg3"></div>
        <div class="background-image" id="bg4"></div>
        <div class="background-overlay"></div>
    </div>
    <div class="bottom-background"></div>

    <div class="container">
        <!-- Header -->
        <header class="d-flex justify-content-between align-items-center py-3">
            <img src="https://i30.servimg.com/u/f30/20/30/93/75/24632810.png" alt="Suarzaxmod Corporation Logo" class="logo">
            <div class="d-flex gap-2">
                <!-- Solo dejamos visibles búsqueda y radio como solicitó el usuario -->
                <a href="http://action_search" class="header-button" aria-label="Buscar">
                    <i class="fas fa-search"></i>
                </a>
                <button id="showRadioBtn" class="header-button" aria-label="Radio">
                    <i class="fas fa-radio"></i>
                </button>
                <!-- Botón expandible para el resto de opciones -->
                <div class="more-menu">
                    <button id="moreMenuBtn" class="header-button" aria-label="Más opciones">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="more-menu-content" id="moreMenuContent">
                        <a href="https://suarzaxmod-corporation-by.on.drv.tw/sites/tyc.notificaciones/T&C.html" class="more-menu-item">
                            <i class="fas fa-bell"></i> Notificaciones
                        </a>
                        <div class="more-menu-item" id="showProfileBtn">
                            <i class="fas fa-user"></i> Perfil
                        </div>
                        <div class="more-menu-item" id="toggleThemeBtn">
                            <i class="fas fa-moon"></i> Cambiar tema
                        </div>
                        <div class="more-menu-item" id="toggleFullscreenBtn">
                            <i class="fas fa-expand"></i> Pantalla completa
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content -->
        <main>
            <!-- Featured partners slider - Mejorado con efectos visuales -->
            <h2 class="section-title" data-aos="fade-right">Socios recomendados</h2>
            <div class="swiper" data-aos="fade-up">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <a href="go:Apks">
                            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjguqgHtRCzHj-227IPIZorftpybavFzRQXkXHaEW5i7NOAwME7HuLbgpi5gTzK6H1gZTILb1vzjLMu5iWawckV6J8PGCy4f56eHJdM6-tkV5b-bvh7llSNbIMGkiLgd11hFcoXH6E-F5nLdAiGmLWSwXi96Y4jSWuN1tevWvciE4IZmhs8LkLX7wwISkc/s400/MP4_20240901_012253VLOG.gif" alt="Apks">
                            <div class="swiper-slide-content">
                                <h3 class="swiper-slide-title">Apks</h3>
                                <p class="swiper-slide-description">Aplicaciones modificadas</p>
                            </div>
                        </a>
                    </div>
                    <div class="swiper-slide">
                        <a href="https://espacioapk.com/">
                            <img src="https://i30.servimg.com/u/f30/20/30/93/75/whatsa10.jpg" alt="Espacio APK">
                            <div class="swiper-slide-content">
                                <h3 class="swiper-slide-title">Espacio APK</h3>
                                <p class="swiper-slide-description">Descarga aplicaciones premium</p>
                            </div>
                        </a>
                    </div>
                    <div class="swiper-slide">
                        <a href="https://modilimitado.io/">
                            <img src="https://i30.servimg.com/u/f30/20/30/93/75/com_na10.jpg" alt="Modi Limitado">
                            <div class="swiper-slide-content">
                                <h3 class="swiper-slide-title">Modi Limitado</h3>
                                <p class="swiper-slide-description">Mods sin límites</p>
                            </div>
                        </a>
                    </div>
                    <div class="swiper-slide">
                        <a href="https://allmodapk.de/">
                            <img src="https://i30.servimg.com/u/f30/20/30/93/75/all-mo10.png" alt="All Mod APK">
                            <div class="swiper-slide-content">
                                <h3 class="swiper-slide-title">All Mod APK</h3>
                                <p class="swiper-slide-description">Todos los mods en un solo lugar</p>
                            </div>
                        </a>
                    </div>
                    <div class="swiper-slide">
                        <a href="https://apkgstore.com/">
                            <img src="https://i30.servimg.com/u/f30/20/30/93/75/apkgst11.jpg" alt="APK GStore">
                            <div class="swiper-slide-content">
                                <h3 class="swiper-slide-title">APK GStore</h3>
                                <p class="swiper-slide-description">Tu tienda de aplicaciones</p>
                            </div>
                        </a>
                    </div>
                    <div class="swiper-slide">
                        <a href="https://getmodsapk.com/">
                            <img src="https://i30.servimg.com/u/f30/20/30/93/75/how-to10.jpg" alt="Get Mods APK">
                            <div class="swiper-slide-content">
                                <h3 class="swiper-slide-title">Get Mods APK</h3>
                                <p class="swiper-slide-description">Descarga mods fácilmente</p>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>

            <!-- Social media section -->
            <h2 class="section-title" data-aos="fade-right">Redes sociales</h2>
            <div class="social-icons" data-aos="fade-up">
                <a href="https://www.facebook.com/profile.php?id=61561075081390&mibextid=ZbWKwL" class="social-icon" aria-label="Facebook">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/facebo12.png" alt="Facebook">
                </a>
                <a href="https://youtube.com/@plcbysuarzaxmod" class="social-icon" aria-label="YouTube">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/youtub11.png" alt="YouTube">
                </a>
                <a href="https://whatsapp.com/channel/0029Va51eKi1yT21v2cFE13P" class="social-icon" aria-label="WhatsApp">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/social10.png" alt="WhatsApp">
                </a>
                <a href="index.com" class="social-icon" aria-label="donaciones">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/donaci10.png" alt="Donaciones">
                </a>
            </div>

            <!-- Categories section -->
            <h2 class="section-title" data-aos="fade-right">Categorías</h2>
            <div class="category-grid" data-aos="fade-up">
                <a href="https://suarzaxmod-corporation-by.on.drv.tw/sites/libros/Librov4.html" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/tenor-10.gif" alt="Libros" class="category-image">
                    <h3 class="category-title">Libros</h3>
                </a>
                <a href="https://suarzaxmod-corporation-by.on.drv.tw/sites/apksecciones/APK index.html
" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/softwa10.gif" alt="Aplicación" class="category-image">
                    <h3 class="category-title">Aplicación</h3>
                </a>
                <a href="https://suarzaxmod-corporation-by.on.drv.tw/sites/electricidad/seccionelectrcidad.html
" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/dc-aut10.gif" alt="Electricidad" class="category-image">
                    <h3 class="category-title">Electricidad</h3>
                </a>
                <a href="https://suarzaxmod-corporation-by.on.drv.tw/sites/iptv/m3ulistas.html" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/iptv10.gif" alt="M3U" class="category-image">
                    <h3 class="category-title">M3U</h3>
                </a>
                <a href="https://serveronlineservices-by.on.drv.tw/www.suarzaxmod.sites/videos/v%C3%ADdeos.html" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/gf7c7510.jpg" alt="Videos PLC" class="category-image">
                    <h3 class="category-title">Videos PLC</h3>
                </a>
                <a href="#sistema" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/softwa10.jpg" alt="Sistema" class="category-image">
                    <h3 class="category-title">Sistema</h3>
                </a>
                <a href="#simuladores" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/87099510.jpg" alt="Simuladores" class="category-image">
                    <h3 class="category-title">Simuladores</h3>
                </a>
                <a href="https://suarzaxmod-corporation-by.on.drv.tw/sites/misitios/suarzaxmodS.A.html" class="category-card">
                    <img src="https://i30.servimg.com/u/f30/20/30/93/75/24632810.png" alt="Más" class="category-image">
                    <h3 class="category-title">Más</h3>
                </a>
            </div>
        </main>

        <!-- Footer -->
        <footer>
            <p>Todos los derechos reservados por Suarzaxmod Corporation ™</p>
        </footer>
    </div>

    <!-- Radio Player Mini - Mejorado según solicitud -->
    <div class="radio-player" id="radioPlayer">
        <div class="radio-player-mini">
            <img src="/placeholder.svg" alt="Estación actual" class="station-logo" id="stationLogo">
            <div class="station-info">
                <h4 class="station-name" id="stationName">Selecciona una estación</h4>
                <p class="station-meta" id="stationMeta">Posición: - | Clasificación: -</p>
            </div>
            <div class="player-controls">
                <button class="control-button play-button" id="playButton">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-button" id="expandPlayerBtn">
                    <i class="fas fa-expand"></i>
                </button>
                <button class="control-button" id="closePlayerBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Radio Player Fullscreen - Cambiado a negro transparente difuminado -->
    <div class="radio-player-fullscreen" id="radioPlayerFullscreen">
        <div class="fullscreen-header">
            <h2 class="fullscreen-title"><i class="fas fa-broadcast-tower"></i> Radio Suarzaxmod</h2>
            <button class="close-fullscreen" id="closeFullscreenBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="fullscreen-content">
            <img src="/placeholder.svg" alt="Estación actual" class="fullscreen-station-logo" id="fullscreenStationLogo">
            <div>
                <h3 class="fullscreen-station-name" id="fullscreenStationName">Selecciona una estación</h3>
                <p class="fullscreen-station-meta" id="fullscreenStationMeta">Posición: - | Clasificación: -</p>
            </div>
            
            <!-- Visualizador de audio mejorado -->
            <div class="audio-visualizer">
                <div class="visualizer-container">
                    <canvas id="audioVisualizer" class="visualizer"></canvas>
                </div>
            </div>
            
            <div class="rhythm-effect" id="rhythmEffect">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
            <div class="fullscreen-controls">
                <button class="fullscreen-control" id="prevStationBtn">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="fullscreen-control fullscreen-play" id="fullscreenPlayBtn">
                    <i class="fas fa-play"></i>
                </button>
                <button class="fullscreen-control" id="nextStationBtn">
                    <i class="fas fa-step-forward"></i>
                </button>
            </div>
            
            <!-- Lista de estaciones mejorada y visible -->
            <div class="station-list-container">
                <h4 class="station-list-title">Todas las estaciones</h4>
                <div class="station-list" id="stationList"></div>
            </div>
            
            <div class="connection-status good" id="connectionStatus">
                Servidor Suarzaxmod™: En Línea
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal-custom" id="profileModal">
        <div class="modal-content-custom">
            <button class="modal-close" id="closeProfileBtn">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header-custom" id="profileHeader">
                <div class="profile-picture-container">
                    <div class="profile-picture" id="profilePicture"></div>
                    <div class="profile-actions">
                        <button id="privacyPolicyBtn" class="profile-action-button" aria-label="Política de privacidad">
                            <i class="fas fa-shield-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-body-custom">
                <form class="profile-form" id="profileForm">
                    <input type="text" id="profileName" class="form-control-custom" placeholder="Nombre">
                    <input type="email" id="profileEmail" class="form-control-custom" placeholder="Correo electrónico">
                    <input type="number" id="profileAge" class="form-control-custom" placeholder="Edad">
                    <select id="profileGender" class="form-control-custom">
                        <option value="">Selecciona tu género</option>
                        <option value="male">Masculino</option>
                        <option value="female">Femenino</option>
                        <option value="other">Otro</option>
                    </select>
                    <div class="file-input-wrapper">
                        <button type="button" class="file-input-btn">
                            <i class="fas fa-camera me-2"></i> Cambiar foto de perfil
                        </button>
                        <input type="file" id="profilePictureInput" accept="image/*">
                    </div>
                    <div class="file-input-wrapper">
                        <button type="button" class="file-input-btn">
                            <i class="fas fa-image me-2"></i> Cambiar imagen de portada
                        </button>
                        <input type="file" id="profileHeaderInput" accept="image/*">
                    </div>
                    <button type="button" id="saveProfileBtn" class="btn-primary-custom">
                        Guardar perfil
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Offline Modal -->
    <div class="modal-custom offline-modal" id="offlineModal">
        <div class="modal-content-custom">
            <button class="modal-close" id="closeOfflineBtn">
                <i class="fas fa-times"></i>
            </button>
            <div class="offline-icon">
                <i class="fas fa-wifi-slash"></i>
            </div>
            <h3 class="offline-title">Sin conexión a internet</h3>
            <p class="offline-message">
                En este momento no estamos teniendo respuesta del servidor. Espera mientras verificamos. Si el problema continúa, verifica la conexión de internet (datos o wifi). Si aún continúa, salga de la aplicación y vuelve a entrar. Si aún sigues teniendo problemas, por favor comunícate con soporte a este correo: suarzaxmod@gmail.com
            </p>
            <div id="verificationIcon">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-wifi"></i>
        </div>
        <div class="notification-content">
            <h4 class="notification-title">Conexión restablecida</h4>
            <p class="notification-message">¡Estamos en línea!</p>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="audioPlayer" crossorigin="anonymous">
        <source src="/placeholder.svg" type="audio/mpeg">
    </audio>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        // Inicializar AOS (Animate On Scroll)
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });

            // Inicializar Swiper - Mejorado con efectos visuales
            const swiper = new Swiper('.swiper', {
                slidesPerView: 3,
                spaceBetween: 30,
                loop: true,
                speed: 800, // Velocidad de transición más suave
                effect: "coverflow", // Efecto de cubierta para una transición
                coverflowEffect: {
                    rotate: 5,
                    stretch: 0,
                    depth: 100,
                    modifier: 1,
                    slideShadows: true,
                },
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                // Mantener 3 slides en todos los breakpoints
                breakpoints: {
                    320: {
                        slidesPerView: 3,
                        spaceBetween: 10,
                    },
                    640: {
                        slidesPerView: 3,
                        spaceBetween: 20,
                    },
                    992: {
                        slidesPerView: 3,
                        spaceBetween: 30,
                    }
                }
            });

            // Inicializar la aplicación
            const app = new App();
        });

        // Clase principal de la aplicación
        class App {
            constructor() {
                // Inicializar componentes
                this.backgroundManager = new BackgroundManager();
                this.radioPlayer = new RadioPlayer();
                this.uiManager = new UIManager();
                this.connectionManager = new ConnectionManager();

                // Prevenir comportamientos por defecto
                this.preventDefaultBehaviors();
            }

            preventDefaultBehaviors() {
                // Prevenir clic derecho
                document.addEventListener('contextmenu', e => e.preventDefault());
                
                // Prevenir arrastrar imágenes
                document.addEventListener('dragstart', e => e.preventDefault());
                
                // Prevenir selección de texto excepto en inputs y textareas
                document.addEventListener('selectstart', e => {
                    if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                        e.preventDefault();
                    }
                });
                
                // Prevenir inspeccionar elemento
                document.addEventListener('keydown', e => {
                    if (e.keyCode === 123 || 
                        (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || 
                        (e.ctrlKey && e.keyCode === 85)) {
                        e.preventDefault();
                    }
                });
            }
        }

        // Clase para manejar el fondo
        class BackgroundManager {
            constructor() {
                this.container = document.getElementById('backgroundContainer');
                this.images = Array.from(this.container.querySelectorAll('.background-image'));
                this.imageUrls = [
                    "https://i30.servimg.com/u/f30/20/30/93/75/milad-10.jpg",
                    "https://i30.servimg.com/u/f30/20/30/93/75/rajat-10.jpg",
                    "https://i30.servimg.com/u/f30/20/30/93/75/umbert10.jpg",
                    "https://i30.servimg.com/u/f30/20/30/93/75/though10.jpg"
                ];
                this.currentIndex = 0;
                this.interval = null;
                
                this.init();
            }
            
            init() {
                // Inicializar imágenes de fondo
                this.images.forEach((element, index) => {
                    if (index < this.imageUrls.length) {
                        element.style.backgroundImage = `url(${this.imageUrls[index]})`;
                    }
                });
                
                // Mostrar la primera imagen
                this.images[0].classList.add('active');
                
                // Iniciar rotación automática
                this.startRotation();
                
                // Exponer método para cambiar fondo manualmente
                window.changeBackground = this.changeBackground.bind(this);
            }
            
            startRotation() {
                this.interval = setInterval(() => this.rotateBackgrounds(), 8000);
            }
            
            stopRotation() {
                if (this.interval) {
                    clearInterval(this.interval);
                    this.interval = null;
                }
            }
            
            rotateBackgrounds() {
                // Ocultar todas las imágenes
                this.images.forEach(element => element.classList.remove('active'));
                
                // Avanzar al siguiente índice
                this.currentIndex = (this.currentIndex + 1) % this.images.length;
                
                // Mostrar la imagen actual
                this.images[this.currentIndex].classList.add('active');
            }
            
            changeBackground(imageUrl) {
                // Detener rotación automática temporalmente
                this.stopRotation();
                
                // Ocultar todas las imágenes
                this.images.forEach(element => element.classList.remove('active'));
                
                // Actualizar la imagen actual con la nueva URL
                this.images[this.currentIndex].style.backgroundImage = `url(${imageUrl})`;
                this.images[this.currentIndex].classList.add('active');
                
                // Reiniciar rotación automática
                this.startRotation();
            }
            
            addBackgroundImage(imageUrl) {
                this.imageUrls.push(imageUrl);
                
                // Si hay elementos disponibles, asignar la nueva imagen
                const availableElement = this.images.find(
                    (el, idx) => idx >= this.imageUrls.length - 1 && !el.style.backgroundImage
                );
                
                if (availableElement) {
                    availableElement.style.backgroundImage = `url(${imageUrl})`;
                }
            }
        }

        // Clase para manejar el reproductor de radio
        class RadioPlayer {
            constructor() {
                // Elementos del DOM
                this.audioPlayer = document.getElementById('audioPlayer');
                this.radioPlayer = document.getElementById('radioPlayer');
                this.radioPlayerFullscreen = document.getElementById('radioPlayerFullscreen');
                this.playButton = document.getElementById('playButton');
                this.fullscreenPlayBtn = document.getElementById('fullscreenPlayBtn');
                this.showRadioBtn = document.getElementById('showRadioBtn');
                this.closePlayerBtn = document.getElementById('closePlayerBtn');
                this.expandPlayerBtn = document.getElementById('expandPlayerBtn');
                this.closeFullscreenBtn = document.getElementById('closeFullscreenBtn');
                this.prevStationBtn = document.getElementById('prevStationBtn');
                this.nextStationBtn = document.getElementById('nextStationBtn');
                this.stationList = document.getElementById('stationList');
                this.rhythmEffect = document.getElementById('rhythmEffect');
                this.audioVisualizer = document.getElementById('audioVisualizer');
                
                // Estado del reproductor
                this.isPlaying = false;
                this.isVisible = false;
                this.currentStation = null;
                this.currentStationIndex = 0;
                this.retryCount = 0;
                this.MAX_RETRIES = 5;
                this.wakeLock = null;
                this.audioContext = null;
                this.analyser = null;
                this.visualizerAnimationFrame = null;
                
                // Estaciones de radio - Lista completa restaurada
                this.stations = [
                    { id: 23, name: "Olímpica Stereo", frequency: "105.9 FM", city: "Monteriá", image: "https://i30.servimg.com/u/f30/20/30/93/75/olimpi10.png" },
                    { id: 2470, name: "Mix Radio", frequency: "96.3 FM", city: "Medellín", image: "https://i30.servimg.com/u/f30/20/30/93/75/mix-ra10.png" },
                    { id: 2123, name: "Radio Potente", frequency: "98.7 FM", city: "Cali", image: "https://i30.servimg.com/u/f30/20/30/93/75/radio-10.png" },
                    { id: 1210, name: "RADIO GRACIA Y AMOR", frequency: "103.5 FM", city: "Barranquilla", image: "https://i30.servimg.com/u/f30/20/30/93/75/gracia10.png" },
                    { id: 682, name: "Carbon Stereo", frequency: "94.1 FM", city: "Bucaramanga", image: "https://i30.servimg.com/u/f30/20/30/93/75/carbon10.png" },
                    { id: 163, name: "Radio Fantástica", frequency: "100.7 FM", city: "Cartagena", image: "https://i30.servimg.com/u/f30/20/30/93/75/fantas10.png" },
                    { id: 157, name: "La Reina", frequency: "98.5 FM", city: "Santa Marta", image: "https://i30.servimg.com/u/f30/20/30/93/75/reina-10.png" },
                    { id: 1624, name: "BPM Electro", frequency: "101.3 FM", city: "Pereira", image: "https://i30.servimg.com/u/f30/20/30/93/75/bpm-el10.png" },
                    { id: 103, name: "RadioAcktiva", frequency: "97.9 FM", city: "Manizales", image: "https://i30.servimg.com/u/f30/20/30/93/75/radioa10.png" },
                    { id: 28, name: "Olímpica Stereo", frequency: "93.7 FM", city: "Valledupar", image: "https://i30.servimg.com/u/f30/20/30/93/75/olimpi10.png" },
                    { id: 1, name: "RCN Radio", frequency: "93.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/rcn-ra10.png" },
                    { id: 2, name: "Caracol Radio", frequency: "100.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/caraco10.png" },
                    { id: 3, name: "La Mega", frequency: "90.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/la-meg10.png" },
                    { id: 4, name: "Los 40 Principales", frequency: "97.4 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/los-4010.png" },
                    { id: 5, name: "Tropicana", frequency: "102.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/tropic10.png" },
                    { id: 6, name: "Radio Uno", frequency: "88.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/radio-10.png" },
                    { id: 7, name: "Candela Stereo", frequency: "101.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/candel10.png" },
                    { id: 8, name: "Vibra FM", frequency: "104.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/vibra-10.png" },
                    { id: 9, name: "Blu Radio", frequency: "96.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/blu-ra10.png" },
                    { id: 10, name: "La FM", frequency: "94.9 FM", city: "Bogotá", image: "https://i30.servimg.com/u/f30/20/30/93/75/la-fm-10.png" }
                ];
                
                this.init();
            }
            
            init() {
                // Inicializar eventos
                this.showRadioBtn.addEventListener('click', () => this.toggleRadioPlayer());
                this.closePlayerBtn.addEventListener('click', () => this.hideRadioPlayer());
                this.expandPlayerBtn.addEventListener('click', () => this.showFullscreenPlayer());
                this.closeFullscreenBtn.addEventListener('click', () => this.hideFullscreenPlayer());
                this.playButton.addEventListener('click', () => this.togglePlayback());
                this.fullscreenPlayBtn.addEventListener('click', () => this.togglePlayback());
                this.prevStationBtn.addEventListener('click', () => this.previousStation());
                this.nextStationBtn.addEventListener('click', () => this.nextStation());
                
                // Eventos del reproductor de audio
                this.audioPlayer.addEventListener('error', () => this.retryPlayback());
                this.audioPlayer.addEventListener('playing', () => {
                    this.retryCount = 0;
                    this.setupAudioVisualizer();
                });
                this.audioPlayer.addEventListener('waiting', () => {
                    if (this.bufferingTimeout) clearTimeout(this.bufferingTimeout);
                    this.bufferingTimeout = setTimeout(() => this.retryPlayback(), 10000);
                });
                
                this.audioPlayer.addEventListener('canplay', () => {
                    if (this.bufferingTimeout) clearTimeout(this.bufferingTimeout);
                });
                
                // Crear lista de estaciones
                this.createStationList();
                
                // Configurar MediaSession API si está disponible
                if ('mediaSession' in navigator) {
                    this.setupMediaSession();
                }
                
                // Solicitar permisos de notificación
                if ('Notification' in window) {
                    Notification.requestPermission();
                }
                
                // Inicializar el visualizador de audio
                this.initAudioVisualizer();
            }
            
            toggleRadioPlayer() {
                if (!this.isVisible) {
                    if (!this.currentStation) {
                        this.loadStation(this.stations[0].id);
                    }
                    this.radioPlayer.classList.add('active');
                    this.isVisible = true;
                    this.acquireWakeLock();
                } else {
                    this.hideRadioPlayer();
                }
            }
            
            hideRadioPlayer() {
                this.radioPlayer.classList.remove('active');
                this.isVisible = false;
                if (!this.isPlaying) {
                    this.releaseWakeLock();
                }
            }
            
            showFullscreenPlayer() {
                this.radioPlayerFullscreen.style.display = 'flex';
                this.radioPlayer.classList.remove('active');
            }
            
            hideFullscreenPlayer() {
                this.radioPlayerFullscreen.style.display = 'none';
                if (this.isVisible) {
                    this.radioPlayer.classList.add('active');
                }
            }
            
            togglePlayback() {
                this.isPlaying = !this.isPlaying;
                this.updatePlayButtonUI();
                
                if (this.isPlaying) {
                    this.audioPlayer.play().catch(error => {
                        console.error("Error al reproducir:", error);
                        this.retryPlayback();
                    });
                    if (this.currentStation) {
                        this.updateMediaSession(this.currentStation);
                        this.startKeepAlive();
                        this.showNotification('Reproduciendo', this.currentStation.title || this.currentStation.name);
                        this.startRhythmAnimation();
                        this.acquireWakeLock();
                    }
                } else {
                    this.audioPlayer.pause();
                    this.stopKeepAlive();
                    this.stopRhythmAnimation();
                    this.stopAudioVisualizer();
                    if (!this.isVisible) {
                        this.releaseWakeLock();
                    }
                }
                
                if ('mediaSession' in navigator) {
                    navigator.mediaSession.playbackState = this.isPlaying ? 'playing' : 'paused';
                }
            }
            
            updatePlayButtonUI() {
                const playIcon = this.isPlaying ? 'fa-pause' : 'fa-play';
                this.playButton.querySelector('i').className = `fas ${playIcon}`;
                this.fullscreenPlayBtn.querySelector('i').className = `fas ${playIcon}`;
            }
            
            async loadStation(id) {
                try {
                    // Encontrar la estación en el array local
                    const station = this.stations.find(s => s.id === id);
                    if (!station) return;
                    
                    // Obtener datos de la API
                    const data = await this.fetchStationData(id);
                    
                    if (data && data.data && data.data.station) {
                        this.currentStation = {
                            ...station,
                            ...data.data.station
                        };
                        
                        // Actualizar UI
                        document.getElementById('stationLogo').src = this.currentStation.image;
                        document.getElementById('fullscreenStationLogo').src = this.currentStation.image;
                        this.audioPlayer.src = this.currentStation.stream;
                        
                        let title = this.currentStation.title || this.currentStation.name;
                        if (this.currentStation.frequency) {
                            title = `${title} - ${this.currentStation.frequency} ${this.currentStation.city}`;
                        }
                        document.getElementById('stationName').textContent = title;
                        document.getElementById('fullscreenStationName').textContent = title;
                        
                        const stationInfo = `Posición: ${this.currentStation.position || '-'} | Clasificación: ${this.currentStation.rating || '0'}\n${this.currentStation.frequency || ''} ${this.currentStation.city || ''}`;
                        document.getElementById('stationMeta').textContent = stationInfo;
                        document.getElementById('fullscreenStationMeta').textContent = stationInfo;
                        
                        this.updateMediaSession(this.currentStation);
                        
                        // Iniciar reproducción
                        this.isPlaying = true;
                        this.updatePlayButtonUI();
                        this.audioPlayer.play().catch(error => {
                            console.error("Error al reproducir:", error);
                            this.retryPlayback();
                        });
                        
                        this.retryCount = 0;
                        this.startKeepAlive();
                        this.startRhythmAnimation();
                        
                        this.showNotification('Nueva estación', title);
                        this.updateActiveStation(id);
                        
                        // Actualizar índice actual
                        this.currentStationIndex = this.stations.findIndex(s => s.id === id);
                    }
                } catch (error) {
                    console.error("Error al cargar la estación:", error);
                    this.retryPlayback();
                }
            }
            
            async fetchStationData(id) {
                try {
                    const response = await fetch("https://emisorasenvivo.com.co/api-backend.php", {
                        method: "POST",
                        headers: {"Content-Type": "application/json"},
                        body: JSON.stringify({ id: id, action: "station-for-widget" })
                    });
                    return await response.json();
                } catch (error) {
                    console.error("Error en la petición:", error);
                    return null;
                }
            }
            
            createStationList() {
                this.stationList.innerHTML = '';
                this.stations.forEach(station => {
                    const stationElement = document.createElement('div');
                    stationElement.className = 'station-item';
                    stationElement.innerHTML = `
                        <img src="${station.image}" alt="${station.name}" class="station-item-logo">
                        <div class="station-item-info">
                            <h5 class="station-item-name">${station.name}</h5>
                            <div class="station-item-freq">${station.frequency} ${station.city}</div>
                        </div>
                    `;
                    stationElement.addEventListener('click', () => {
                        this.loadStation(station.id);
                    });
                    this.stationList.appendChild(stationElement);
                });
            }
            
            updateActiveStation(id) {
                const stationItems = document.querySelectorAll('.station-item');
                stationItems.forEach(item => {
                    item.classList.remove('active');
                });
                
                const activeIndex = this.stations.findIndex(s => s.id === id);
                if (activeIndex >= 0 && stationItems[activeIndex]) {
                    stationItems[activeIndex].classList.add('active');
                }
            }
            
            previousStation() {
                this.currentStationIndex = (this.currentStationIndex - 1 + this.stations.length) % this.stations.length;
                this.loadStation(this.stations[this.currentStationIndex].id);
            }
            
            nextStation() {
                this.currentStationIndex = (this.currentStationIndex + 1) % this.stations.length;
                this.loadStation(this.stations[this.currentStationIndex].id);
            }
            
            setupMediaSession() {
                if (!('mediaSession' in navigator)) return;
                
                navigator.mediaSession.setActionHandler('play', () => {
                    this.audioPlayer.play();
                    this.isPlaying = true;
                    this.updatePlayButtonUI();
                });
                
                navigator.mediaSession.setActionHandler('pause', () => {
                    this.audioPlayer.pause();
                    this.isPlaying = false;
                    this.updatePlayButtonUI();
                });
                
                navigator.mediaSession.setActionHandler('previoustrack', () => {
                    this.previousStation();
                });
                
                navigator.mediaSession.setActionHandler('nexttrack', () => {
                    this.nextStation();
                });
            }
            
            updateMediaSession(station) {
                if (!('mediaSession' in navigator)) return;
                
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: station.title || station.name,
                    artist: station.frequency ? `${station.frequency} ${station.city}` : 'Radio Suarzaxmod',
                    album: 'Radio App Suarzaxmod',
                    artwork: [
                        { src: station.image, sizes: '96x96', type: 'image/png' },
                        { src: station.image, sizes: '128x128', type: 'image/png' },
                        { src: station.image, sizes: '192x192', type: 'image/png' },
                        { src: station.image, sizes: '256x256', type: 'image/png' },
                        { src: station.image, sizes: '384x384', type: 'image/png' },
                        { src: station.image, sizes: '512x512', type: 'image/png' }
                    ]
                });
            }
            
            startKeepAlive() {
                this.stopKeepAlive();
                this.keepAliveInterval = setInterval(() => {
                    if (this.audioPlayer.paused && this.isPlaying) {
                        this.retryPlayback();
                    }
                    this.checkStuckPlayback();
                }, 5000);
            }
            
            stopKeepAlive() {
                if (this.keepAliveInterval) {
                    clearInterval(this.keepAliveInterval);
                }
            }
            
            retryPlayback() {
                if (this.retryCount < this.MAX_RETRIES) {
                    this.retryCount++;
                    console.log(`Reintentando reproducción (intento ${this.retryCount})...`);
                    this.audioPlayer.load();
                    this.audioPlayer.play().catch(error => {
                        console.error(`Error en el reintento ${this.retryCount}:`, error);
                        setTimeout(() => this.retryPlayback(), 2000 * this.retryCount);
                    });
                } else {
                    console.error("Número máximo de reintentos alcanzado. Intentando reconectar...");
                    if (this.currentStation) {
                        this.loadStation(this.currentStation.id);
                    }
                    this.retryCount = 0;
                }
            }
            
            checkStuckPlayback() {
                if (this.isPlaying && !this.audioPlayer.paused) {
                    if (this.audioPlayer.currentTime === this.lastPlaybackTime) {
                        this.stuckCount++;
                        if (this.stuckCount >= 3) {
                            console.log("Reproducción estancada detectada. Reiniciando...");
                            this.retryPlayback();
                            this.stuckCount = 0;
                        }
                    } else {
                        this.stuckCount = 0;
                    }
                    this.lastPlaybackTime = this.audioPlayer.currentTime;
                }
            }
            
            startRhythmAnimation() {
                const bars = this.rhythmEffect.querySelectorAll('.bar');
                const animate = () => {
                    bars.forEach(bar => {
                        const height = Math.random() * 100;
                        bar.style.height = `${height}%`;
                    });
                    if (this.isPlaying) {
                        requestAnimationFrame(animate);
                    }
                };
                animate();
                this.rhythmEffect.classList.add('playing');
            }
            
            stopRhythmAnimation() {
                const bars = this.rhythmEffect.querySelectorAll('.bar');
                bars.forEach(bar => {
                    bar.style.height = '10%';
                });
                this.rhythmEffect.classList.remove('playing');
            }
            
            // Nuevo visualizador de audio mejorado
            initAudioVisualizer() {
                const canvas = this.audioVisualizer;
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                
                // Ajustar el tamaño del canvas
                const resizeCanvas = () => {
                    const container = canvas.parentElement;
                    canvas.width = container.clientWidth;
                    canvas.height = container.clientHeight;
                };
                
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);
            }
            
            setupAudioVisualizer() {
                if (!this.audioContext) {
                    try {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        const source = this.audioContext.createMediaElementSource(this.audioPlayer);
                        this.analyser = this.audioContext.createAnalyser();
                        
                        source.connect(this.analyser);
                        this.analyser.connect(this.audioContext.destination);
                        
                        this.analyser.fftSize = 256;
                        this.bufferLength = this.analyser.frequencyBinCount;
                        this.dataArray = new Uint8Array(this.bufferLength);
                        
                        this.renderAudioVisualizer();
                    } catch (e) {
                        console.error("Error al configurar el visualizador de audio:", e);
                    }
                } else {
                    this.renderAudioVisualizer();
                }
            }
            
            renderAudioVisualizer() {
                if (!this.analyser || !this.audioVisualizer) return;
                
                const canvas = this.audioVisualizer;
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                ctx.clearRect(0, 0, width, height);
                
                const renderFrame = () => {
                    if (!this.isPlaying) return;
                    
                    this.visualizerAnimationFrame = requestAnimationFrame(renderFrame);
                    
                    this.analyser.getByteFrequencyData(this.dataArray);
                    
                    ctx.clearRect(0, 0, width, height);
                    
                    // Gradiente para las barras
                    const gradient = ctx.createLinearGradient(0, height, 0, 0);
                    gradient.addColorStop(0, 'rgba(0, 123, 255, 0.5)');
                    gradient.addColorStop(0.5, 'rgba(102, 16, 242, 0.7)');
                    gradient.addColorStop(1, 'rgba(255, 255, 255, 0.9)');
                    
                    const barWidth = (width / this.bufferLength) * 2.5;
                    let x = 0;
                    
                    for (let i = 0; i < this.bufferLength; i++) {
                        const barHeight = (this.dataArray[i] / 255) * height;
                        
                        ctx.fillStyle = gradient;
                        ctx.fillRect(x, height - barHeight, barWidth, barHeight);
                        
                        x += barWidth + 1;
                    }
                };
                
                renderFrame();
            }
            
            stopAudioVisualizer() {
                if (this.visualizerAnimationFrame) {
                    cancelAnimationFrame(this.visualizerAnimationFrame);
                    this.visualizerAnimationFrame = null;
                }
                
                if (this.audioVisualizer) {
                    const ctx = this.audioVisualizer.getContext('2d');
                    ctx.clearRect(0, 0, this.audioVisualizer.width, this.audioVisualizer.height);
                }
            }
            
            showNotification(title, body) {
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification(title, { 
                        body: body,
                        icon: this.currentStation ? this.currentStation.image : null
                    });
                }
            }
            
            async acquireWakeLock() {
                if ('wakeLock' in navigator) {
                    try {
                        this.wakeLock = await navigator.wakeLock.request('screen');
                        console.log('Wake Lock is active');
                    } catch (err) {
                        console.error(`${err.name}, ${err.message}`);
                    }
                }
            }
            
            releaseWakeLock() {
                if (this.wakeLock !== null) {
                    this.wakeLock.release()
                        .then(() => {
                            console.log('Wake Lock has been released');
                            this.wakeLock = null;
                        });
                }
            }
        }

        // Clase para manejar la interfaz de usuario
        class UIManager {
            constructor() {
                // Elementos del DOM
                this.profileModal = document.getElementById('profileModal');
                this.showProfileBtn = document.getElementById('showProfileBtn');
                this.closeProfileBtn = document.getElementById('closeProfileBtn');
                this.saveProfileBtn = document.getElementById('saveProfileBtn');
                this.privacyPolicyBtn = document.getElementById('privacyPolicyBtn');
                this.toggleThemeBtn = document.getElementById('toggleThemeBtn');
                this.toggleFullscreenBtn = document.getElementById('toggleFullscreenBtn');
                this.moreMenuBtn = document.getElementById('moreMenuBtn');
                this.moreMenuContent = document.getElementById('moreMenuContent');
                
                // Estado
                this.isFullscreen = false;
                this.isMoreMenuOpen = false;
                
                this.init();
            }
            
            init() {
                // Inicializar eventos
                this.showProfileBtn.addEventListener('click', () => this.showProfileModal());
                this.closeProfileBtn.addEventListener('click', () => this.hideProfileModal());
                this.saveProfileBtn.addEventListener('click', () => this.saveProfile());
                this.privacyPolicyBtn.addEventListener('click', () => this.showPrivacyPolicy());
                this.toggleThemeBtn.addEventListener('click', () => this.toggleTheme());
                this.toggleFullscreenBtn.addEventListener('click', () => this.toggleFullscreen());
                this.moreMenuBtn.addEventListener('click', () => this.toggleMoreMenu());
                
                // Cerrar el menú desplegable al hacer clic fuera
                document.addEventListener('click', (e) => {
                    if (this.isMoreMenuOpen && !this.moreMenuBtn.contains(e.target) && !this.moreMenuContent.contains(e.target)) {
                        this.closeMoreMenu();
                    }
                });
                
                // Cerrar el modal de perfil si se hace clic fuera de él
                window.onclick = (event) => {
                    if (event.target == this.profileModal) {
                        this.hideProfileModal();
                    }
                };
                
                // Manejar cambios en el estado de pantalla completa
                document.addEventListener('fullscreenchange', () => {
                    this.isFullscreen = !!document.fullscreenElement;
                    this.updateFullscreenButtonUI();
                });
                
                // Cargar perfil guardado
                this.loadProfile();
                
                // Cargar tema guardado
                this.loadTheme();
                
                // Configurar manejo de imágenes de perfil
                this.setupProfileImageHandlers();
            }
            
            toggleMoreMenu() {
                if (this.isMoreMenuOpen) {
                    this.closeMoreMenu();
                } else {
                    this.openMoreMenu();
                }
            }
            
            openMoreMenu() {
                this.moreMenuContent.classList.add('show');
                this.isMoreMenuOpen = true;
            }
            
            closeMoreMenu() {
                this.moreMenuContent.classList.remove('show');
                this.isMoreMenuOpen = false;
            }
            
            showProfileModal() {
                this.profileModal.style.display = 'flex';
                this.closeMoreMenu();
            }
            
            hideProfileModal() {
                this.profileModal.style.display = 'none';
            }
            
            saveProfile() {
                const name = document.getElementById('profileName').value;
                const email = document.getElementById('profileEmail').value;
                const age = document.getElementById('profileAge').value;
                const gender = document.getElementById('profileGender').value;
                
                // Guardar los datos del perfil en localStorage
                const profileData = { name, email, age, gender };
                localStorage.setItem('userProfile', JSON.stringify(profileData));
                
                console.log('Perfil guardado:', profileData);
                
                // Mostrar notificación
                this.showNotification('Perfil guardado', 'Tus datos han sido guardados correctamente');
                
                // Cerrar el modal después de guardar
                this.hideProfileModal();
            }
            
            loadProfile() {
                const profileData = JSON.parse(localStorage.getItem('userProfile'));
                if (profileData) {
                    document.getElementById('profileName').value = profileData.name || '';
                    document.getElementById('profileEmail').value = profileData.email || '';
                    document.getElementById('profileAge').value = profileData.age || '';
                    document.getElementById('profileGender').value = profileData.gender || '';
                }
                
                const profilePicture = localStorage.getItem('profilePicture');
                if (profilePicture) {
                    document.getElementById('profilePicture').style.backgroundImage = `url(${profilePicture})`;
                }
                
                const headerImage = localStorage.getItem('headerImage');
                if (headerImage) {
                    document.getElementById('profileHeader').style.backgroundImage = `url(${headerImage})`;
                }
            }
            
            setupProfileImageHandlers() {
                document.getElementById('profilePictureInput').addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const profilePicture = e.target.result;
                            document.getElementById('profilePicture').style.backgroundImage = `url(${profilePicture})`;
                            localStorage.setItem('profilePicture', profilePicture);
                        };
                        reader.readAsDataURL(file);
                    }
                });
                
                document.getElementById('profileHeaderInput').addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const headerImage = e.target.result;
                            document.getElementById('profileHeader').style.backgroundImage = `url(${headerImage})`;
                            localStorage.setItem('headerImage', headerImage);
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            loadTheme() {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'light') {
                    document.body.classList.add('light-mode');
                    this.toggleThemeBtn.querySelector('i').className = 'fas fa-sun';
                }
            }
            
            toggleTheme() {
                document.body.classList.toggle('light-mode');
                const isLightMode = document.body.classList.contains('light-mode');
                localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
                
                // Actualizar icono
                this.toggleThemeBtn.querySelector('i').className = isLightMode ? 'fas fa-sun' : 'fas fa-moon';
                
                // Actualizar variables RGB
                if (isLightMode) {
                    document.documentElement.style.setProperty('--background-color-rgb', '248, 249, 250');
                } else {
                    document.documentElement.style.setProperty('--background-color-rgb', '18, 18, 18');
                }
                
                // Cerrar el menú desplegable
                this.closeMoreMenu();
            }
            
            requestFullscreen() {
                const elem = document.documentElement;
                
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { /* Safari */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE11 */
                    elem.msRequestFullscreen();
                }
                
                this.isFullscreen = true;
                this.updateFullscreenButtonUI();
            }
            
            exitFullscreen() {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
                
                this.isFullscreen = false;
                this.updateFullscreenButtonUI();
            }
            
            toggleFullscreen() {
                if (!this.isFullscreen) {
                    this.requestFullscreen();
                } else {
                    this.exitFullscreen();
                }
                
                // Cerrar el menú desplegable
                this.closeMoreMenu();
            }
            
            updateFullscreenButtonUI() {
                this.toggleFullscreenBtn.querySelector('i').className = this.isFullscreen ? 'fas fa-compress' : 'fas fa-expand';
            }
            
            showPrivacyPolicy() {
                window.open("https://serveronlineservices-by.on.drv.tw/www.suarzaxmod.sites/tyc.notificaciones/T%26C.html", "_blank");
            }
            
            showNotification(title, message) {
                const notification = document.getElementById('notification');
                const notificationTitle = notification.querySelector('.notification-title');
                const notificationMessage = notification.querySelector('.notification-message');
                const notificationIcon = notification.querySelector('.notification-icon i');
                
                notificationTitle.textContent = title;
                notificationMessage.textContent = message;
                notificationIcon.className = 'fas fa-check';
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }

        // Clase para manejar la conexión
        class ConnectionManager {
            constructor() {
                this.offlineModal = document.getElementById('offlineModal');
                this.closeOfflineBtn = document.getElementById('closeOfflineBtn');
                this.notification = document.getElementById('notification');
                this.verificationIcon = document.getElementById('verificationIcon');
                this.connectionStatus = document.getElementById('connectionStatus');
                this.isOffline = false;
                
                this.init();
            }
            
            init() {
                // Inicializar eventos
                this.closeOfflineBtn.addEventListener('click', () => {
                    this.offlineModal.style.display = 'none';
                });
                
                // Manejar eventos de conexión
                window.addEventListener('online', () => {
                    this.isOffline = false;
                    this.offlineModal.style.display = 'none';
                    this.showOnlineNotification();
                });
                
                window.addEventListener('offline', () => {
                    this.isOffline = true;
                    this.showOfflineModal();
                });
                
                // Verificar conexión inicial
                if (!navigator.onLine) {
                    this.isOffline = true;
                    this.showOfflineModal();
                }
                
                // Iniciar verificación periódica de conexión
                setInterval(() => this.checkConnection(), 30000);
            }
            
            showOfflineModal() {
                this.offlineModal.style.display = 'flex';
                this.verificationIcon.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                this.connectionStatus.textContent = 'Servidor Suarzaxmod™: Sin conexión';
                this.connectionStatus.className = 'connection-status poor';
            }
            
            showOnlineNotification() {
                const notification = this.notification;
                const notificationTitle = notification.querySelector('.notification-title');
                const notificationMessage = notification.querySelector('.notification-message');
                const notificationIcon = notification.querySelector('.notification-icon i');
                
                notificationTitle.textContent = 'Conexión restablecida';
                notificationMessage.textContent = '¡Estamos en línea!';
                notificationIcon.className = 'fas fa-wifi';
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
                
                this.connectionStatus.textContent = 'Servidor Suarzaxmod™: En línea';
                this.connectionStatus.className = 'connection-status good';
            }
            
            checkConnection() {
                if (navigator.onLine && this.isOffline) {
                    this.isOffline = false;
                    this.offlineModal.style.display = 'none';
                    this.showOnlineNotification();
                    this.verificationIcon.innerHTML = '<i class="fas fa-check"></i>';
                } else if (!navigator.onLine && !this.isOffline) {
                    this.isOffline = true;
                    this.showOfflineModal();
                }
            }
        }
    </script>
</body>
</html>